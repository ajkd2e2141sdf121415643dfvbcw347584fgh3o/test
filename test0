_G.FarmChest = true

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local VirtualInputManager = game:GetService("VirtualInputManager")
local GuiService = game:GetService("GuiService")
local StarterGui = game:GetService("StarterGui")
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")
local player = Players.LocalPlayer

if game.CoreGui:FindFirstChild("ScreenGui") then game.CoreGui:FindFirstChild("ScreenGui"):Destroy() end
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local H_KEY_CODE = Enum.KeyCode.H
local isRenderingEnabled = true

-- ‚öôÔ∏è ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö Server Hop ‡πÉ‡∏´‡∏°‡πà
local PlaceID = game.PlaceId
local MAX_PLAYERS = 5  -- ‡∏õ‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
local SERVER_FILE = "used_servers.json"

UserInputService.InputBegan:Connect(function(input, isProcessed)
	if not isProcessed and input.KeyCode == H_KEY_CODE then
		isRenderingEnabled = not isRenderingEnabled
		RunService:Set3dRenderingEnabled(isRenderingEnabled)
	end
end)

-- Gui to Lua
-- Version: 3.2

-- Instances:

local Credit = Instance.new("ScreenGui")
local Creditframe = Instance.new("Frame")
local madebyvec = Instance.new("TextLabel")
local Logo = Instance.new("ImageLabel")
local Discord = Instance.new("ImageButton")
local Othertext = Instance.new("TextLabel")
local Clickme = Instance.new("TextLabel")
local ClickmeTh = Instance.new("TextLabel")
local OthertextTH = Instance.new("TextLabel")
local Coplinkdiscord = Instance.new("TextButton")

--Properties:

local Ui =  game:GetService("CoreGui"):FindFirstChild("Credit")
if Ui then
    Ui:Destroy()
end
Credit.Name = "Credit"
Credit.Parent = game.CoreGui
Credit.Enabled = true
Credit.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

Creditframe.Name = "Creditframe"
Creditframe.Parent = Credit
Creditframe.BackgroundColor3 = Color3.fromRGB(17, 17, 17)
Creditframe.BackgroundTransparency = 0.3
Creditframe.BorderColor3 = Color3.fromRGB(0, 0, 0)
Creditframe.BorderSizePixel = 0
Creditframe.Size = UDim2.new(2, 0, 2, 0) -- ‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠
Creditframe.AnchorPoint = Vector2.new(0.5, 0.5)
Creditframe.Position = UDim2.new(0.5, 0, 0.5, 0) -- ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á

madebyvec.Name = "madebyvec"
madebyvec.Parent = Creditframe
madebyvec.AnchorPoint = Vector2.new(0.5, 0.5)
madebyvec.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
madebyvec.BackgroundTransparency = 1.000
madebyvec.BorderColor3 = Color3.fromRGB(0, 0, 0)
madebyvec.BorderSizePixel = 0
madebyvec.Position = UDim2.new(0.5, 0, 0.400000006, 0) -- ‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á
madebyvec.Size = UDim2.new(0, 200, 0, 50)
madebyvec.Font = Enum.Font.SourceSansBold
madebyvec.Text = "Made by Vector Hub"
madebyvec.TextColor3 = Color3.fromRGB(0, 0, 0)
madebyvec.TextSize = 100.000
madebyvec.TextStrokeColor3 = Color3.fromRGB(0, 26, 255)
madebyvec.TextStrokeTransparency = 0.000

Logo.Name = "Logo"
Logo.Parent = Creditframe
Logo.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Logo.BackgroundTransparency = 1.000
Logo.BorderColor3 = Color3.fromRGB(0, 0, 0)
Logo.BorderSizePixel = 0
Logo.Position = UDim2.new(0, 1150, 0, 350) -- ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•
Logo.Size = UDim2.new(0, 900, 0, 900) -- ‡∏Ç‡∏ô‡∏≤‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏Å‡∏±‡∏ö‡∏à‡∏≠
Logo.ZIndex = 0
Logo.Image = "rbxassetid://93896063585601"
Logo.ImageColor3 = Color3.fromRGB(0, 102, 255)
Logo.ImageTransparency = 0.300

Discord.Name = "Discord"
Discord.Parent = Creditframe
Discord.AnchorPoint = Vector2.new(0.5, 0.5)
Discord.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Discord.BackgroundTransparency = 1.000
Discord.BorderColor3 = Color3.fromRGB(0, 0, 0)
Discord.BorderSizePixel = 0
Discord.Position = UDim2.new(0.5, 0, 0.500000715, 0) 
Discord.Size = UDim2.new(0, 115, 0, 104)
Discord.Image = "rbxassetid://134478721013696"

Othertext.Name = "Othertext"
Othertext.Parent = Creditframe
Othertext.AnchorPoint = Vector2.new(0.5, 0.5)
Othertext.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Othertext.BackgroundTransparency = 1.000
Othertext.BorderColor3 = Color3.fromRGB(0, 0, 0)
Othertext.BorderSizePixel = 0
Othertext.Position = UDim2.new(0.5, 0, 0.440000027, 0) -- ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ï‡πâ Logo
Othertext.Size = UDim2.new(0, 400, 0, 37)
Othertext.Font = Enum.Font.SourceSans
Othertext.Text = "Join My Discord For News Update / Report Bug,RequestGame"
Othertext.TextColor3 = Color3.fromRGB(0, 0, 0)
Othertext.TextSize = 30.000
Othertext.TextStrokeColor3 = Color3.fromRGB(0, 26, 255)
Othertext.TextStrokeTransparency = 0.000

Clickme.Name = "Clickme"
Clickme.Parent = Creditframe
Clickme.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Clickme.BackgroundTransparency = 1.000
Clickme.BorderColor3 = Color3.fromRGB(0, 0, 0)
Clickme.BorderSizePixel = 0
Clickme.Position = UDim2.new(0.399998873, 0, 0.490000069, 0) 
Clickme.Size = UDim2.new(0, 300, 0, 50)
Clickme.Font = Enum.Font.SourceSans
Clickme.Text = "Click Logo Discord For Copy Link >>"
Clickme.TextColor3 = Color3.fromRGB(0, 0, 0)
Clickme.TextSize = 19.000
Clickme.TextStrokeColor3 = Color3.fromRGB(0, 26, 255)
Clickme.TextStrokeTransparency = 0.000

ClickmeTh.Name = "ClickmeTh"
ClickmeTh.Parent = Creditframe
ClickmeTh.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ClickmeTh.BackgroundTransparency = 1.000
ClickmeTh.BorderColor3 = Color3.fromRGB(0, 0, 0)
ClickmeTh.BorderSizePixel = 0
ClickmeTh.Position = UDim2.new(0.5, 0, 0.490000069, 0)
ClickmeTh.Size = UDim2.new(0, 300, 0, 50)
ClickmeTh.Font = Enum.Font.SourceSans
ClickmeTh.Text = "<< ‡∏Å‡∏î‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡πá‡∏≠‡∏õ‡∏õ‡∏µ‡πâ‡∏•‡∏¥‡πâ‡∏á‡∏î‡∏¥‡∏™‡∏Ñ‡∏≠‡∏£‡πå‡∏î"
ClickmeTh.TextColor3 = Color3.fromRGB(0, 0, 0)
ClickmeTh.TextSize = 19.000
ClickmeTh.TextStrokeColor3 = Color3.fromRGB(0, 26, 255)
ClickmeTh.TextStrokeTransparency = 0.000

OthertextTH.Name = "OthertextTH"
OthertextTH.Parent = Creditframe
OthertextTH.AnchorPoint = Vector2.new(0.5, 0.5)
OthertextTH.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
OthertextTH.BackgroundTransparency = 1.000
OthertextTH.BorderColor3 = Color3.fromRGB(0, 0, 0)
OthertextTH.BorderSizePixel = 0
OthertextTH.Position = UDim2.new(0.5, 0, 0.460000008, 0) -- ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ï‡πâ Othertext
OthertextTH.Size = UDim2.new(0, 400, 0, 37)
OthertextTH.Font = Enum.Font.SourceSans
OthertextTH.Text = "‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡∏¥‡∏™‡∏Ñ‡∏≠‡∏£‡πå‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£ ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏µ‡∏û‡∏≠‡∏£‡πå‡∏ï‡∏ö‡∏±‡∏Ñ ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÄ‡∏Å‡∏°"
OthertextTH.TextColor3 = Color3.fromRGB(0, 0, 0)
OthertextTH.TextSize = 30.000
OthertextTH.TextStrokeColor3 = Color3.fromRGB(0, 26, 255)
OthertextTH.TextStrokeTransparency = 0.000

Coplinkdiscord.Name = "Coplinkdiscord"
Coplinkdiscord.Parent = Creditframe
Coplinkdiscord.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Coplinkdiscord.BackgroundTransparency = 0.9
Coplinkdiscord.BackgroundColor3 = Color3.fromRGB(100, 100, 100) -- ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô
Coplinkdiscord.BorderColor3 = Color3.fromRGB(0, 0, 0)
Coplinkdiscord.BorderSizePixel = 0
Coplinkdiscord.Position = UDim2.new(0.5, -57, 0.47, 0) -- ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô
Coplinkdiscord.Size = UDim2.new(0, 114, 0, 86)
Coplinkdiscord.Font = Enum.Font.SourceSans
Coplinkdiscord.Text = "CLICKME!!"
Coplinkdiscord.TextColor3 = Color3.fromRGB(255, 0, 0)
Coplinkdiscord.TextSize = 14.000
Coplinkdiscord.TextStrokeTransparency = 0.000

-- ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏¥‡∏Å
local UserInputService = game:GetService("UserInputService")

Coplinkdiscord.MouseButton1Click:Connect(function()
    setclipboard("https://discord.gg/977JQXX82w")
    local player = game.Players.LocalPlayer
    if player then
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "Copied!",
            Text = "Discord link copied to clipboard!",
            Duration = 5
        })
    end
    print("Copied Discord link to clipboard") -- Debug
end)

-- ‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô Logo ‡∏ï‡∏≤‡∏°‡πÄ‡∏Ç‡πá‡∏°‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤‡πÅ‡∏ö‡∏ö‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local rotation = 0
local rotationSpeed = 0.4 -- ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô (‡∏≠‡∏á‡∏®‡∏≤‡∏ï‡πà‡∏≠‡πÄ‡∏ü‡∏£‡∏°)

local function updateRotation()
    rotation = rotation + rotationSpeed
    Logo.Rotation = rotation % 360 -- ‡πÉ‡∏ä‡πâ modulo ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏´‡∏°‡∏∏‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà 0-360 ‡∏≠‡∏á‡∏®‡∏≤
end

RunService.RenderStepped:Connect(updateRotation) -- ‡∏´‡∏°‡∏∏‡∏ô‡∏ó‡∏∏‡∏Å‡πÄ‡∏ü‡∏£‡∏°

local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local TextButton = Instance.new("TextButton")
local TextLabel = Instance.new("TextLabel")
local UICorner = Instance.new("UICorner")
local UICorner_2 = Instance.new("UICorner")
local TextButton_2 = Instance.new("TextButton")

--Properties:
ScreenGui.Parent = game:GetService("CoreGui")
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

Frame.Parent = ScreenGui
Frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Frame.BackgroundTransparency = 1.000
Frame.BorderSizePixel = 2
Frame.Position = UDim2.new(0.359884858, 0, 0.3125, 0)
Frame.Size = UDim2.new(0, 71, 0, 21)

TextButton.Parent = Frame
TextButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
TextButton.BackgroundTransparency = 0.900
TextButton.BorderColor3 = Color3.fromRGB(27, 42, 53)
TextButton.Position = UDim2.new(-0.00486259907, 0, 0.992753386, 0)
TextButton.Size = UDim2.new(0, 71, 0, 38)
TextButton.Font = Enum.Font.SourceSansBold
TextButton.Text = "Whitescreen"
TextButton.TextColor3 = Color3.fromRGB(255, 255, 255)
TextButton.TextSize = 14.000
local is3DRenderingEnabled = true

TextButton.MouseButton1Click:Connect(function()
	is3DRenderingEnabled = not is3DRenderingEnabled
	game:GetService("RunService"):Set3dRenderingEnabled(is3DRenderingEnabled)
end)

TextLabel.Parent = TextButton
TextLabel.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
TextLabel.BackgroundTransparency = 1.000
TextLabel.Position = UDim2.new(0.0422539562, 0, 0.657894373, 0)
TextLabel.Size = UDim2.new(0, 64, 0, 13)
TextLabel.Font = Enum.Font.SourceSans
TextLabel.Text = "H or Click"
TextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.TextSize = 14.000

UICorner.Parent = TextButton
UICorner_2.Parent = Frame

TextButton_2.Parent = Frame
TextButton_2.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
TextButton_2.BackgroundTransparency = 0.900
TextButton_2.Position = UDim2.new(0.154929116, 0, 0.0952380896, 0)
TextButton_2.Size = UDim2.new(0, 47, 0, 18)
TextButton_2.Font = Enum.Font.SourceSans
TextButton_2.Text = "Hide"
TextButton_2.TextColor3 = Color3.fromRGB(255, 255, 255)
TextButton_2.TextSize = 14.000
TextButton_2.MouseButton1Click:Connect(function()
	if Frame.Visible then
		TextButton.Visible = not TextButton.Visible
	else
		TextButton.Visible = not TextButton.Visible
	end
end)

local function VFHJNK_fake_script() -- Frame.LocalScript
	local script = Instance.new('LocalScript', Frame)
	script.Parent.Draggable = true
	script.Parent.Active = true
end
coroutine.wrap(VFHJNK_fake_script)()

-- üì¢ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
local function notify(title, text, duration)
    pcall(function()
        StarterGui:SetCore("SendNotification", {
            Icon = "rbxassetid://16129235054",
            Title = title,
            Text = text,
            Duration = duration or 3
        })
    end)
end

-- üóÇÔ∏è ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß
local function loadUsedServers()
    if isfile and isfile(SERVER_FILE) then
        local success, data = pcall(function()
            return HttpService:JSONDecode(readfile(SERVER_FILE))
        end)
        return success and data or {}
    end
    return {}
end

local function saveUsedServer(serverId)
    if writefile then
        local used = loadUsedServers()
        table.insert(used, serverId)
        
        -- ‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏Ñ‡πà 50 ‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
        if #used > 50 then
            table.remove(used, 1)
        end
        
        pcall(function()
            writefile(SERVER_FILE, HttpService:JSONEncode(used))
        end)
    end
end

-- üåê ‡∏£‡∏∞‡∏ö‡∏ö Smart Server Hop ‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß
local function SmartHop(preferLowPopulation)
    repeat task.wait() until game:IsLoaded() and player
    
    notify("Server Hop", "üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü...", 2)
    
    local success, serverData = pcall(function()
        return HttpService:JSONDecode(
            game:HttpGet("https://games.roblox.com/v1/games/" .. PlaceID .. "/servers/Public?sortOrder=Asc&limit=100")
        )
    end)
    
    if not success or not serverData or not serverData.data then
        notify("Error", "‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÑ‡∏î‡πâ", 3)
        -- Fallback: random teleport
        pcall(function()
            TeleportService:Teleport(PlaceID, player)
        end)
        return
    end
    
    local goodServers = {}
    local currentJobId = game.JobId
    
    -- ‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏° (‡πÄ‡∏û‡∏¥‡πà‡∏° buffer space)
    for _, server in pairs(serverData.data) do
        local maxPlayers = server.maxPlayers or 30
        local currentPlayers = server.playing or 0
        local availableSlots = maxPlayers - currentPlayers
        
        local isGoodServer = (
            server.id ~= currentJobId and
            currentPlayers >= 1 and  -- ‡∏°‡∏µ‡∏Ñ‡∏ô‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏Ñ‡∏ô
            availableSlots >= 2 and  -- ‡πÄ‡∏ß‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2 ‡∏ó‡∏µ‡πà
            currentPlayers <= (preferLowPopulation and MAX_PLAYERS or maxPlayers - 2) and
            not isServerUsed(server.id)
        )
        
        if isGoodServer then
            table.insert(goodServers, {
                id = server.id,
                playing = currentPlayers,
                maxPlayers = maxPlayers,
                availableSlots = availableSlots,
                ping = server.ping or 999
            })
        end
    end
    
    if #goodServers == 0 then
        notify("No Servers", "‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏° ‡πÉ‡∏ä‡πâ Random Teleport", 3)
        pcall(function()
            TeleportService:Teleport(PlaceID, player)
        end)
        return
    end
    
    -- ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö: ‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á -> ‡∏Ñ‡∏ô‡∏ô‡πâ‡∏≠‡∏¢ -> ping ‡∏ï‡πà‡∏≥
    table.sort(goodServers, function(a, b)
        if a.availableSlots ~= b.availableSlots then
            return a.availableSlots > b.availableSlots -- ‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤
        elseif preferLowPopulation and a.playing ~= b.playing then
            return a.playing < b.playing
        else
            return a.ping < b.ping
        end
    end)
    
    -- ‡∏•‡∏≠‡∏á‡∏´‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡πá‡∏°
    local maxAttempts = math.min(3, #goodServers)
    local teleportSuccess = false
    
    for attempt = 1, maxAttempts do
        local targetServer = goodServers[attempt]
        
        notify("Found Server " .. attempt, 
               "üéØ " .. targetServer.playing .. "/" .. targetServer.maxPlayers .. 
               " (‡∏ß‡πà‡∏≤‡∏á: " .. targetServer.availableSlots .. ")", 2)
        
        -- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Teleport Events
        local teleportConnection
        local failConnection = TeleportService.TeleportInitFailed:Connect(function(plr, teleportResult, errorMessage)
            if plr == player then
                warn("‚ö†Ô∏è Attempt " .. attempt .. " Failed: " .. tostring(errorMessage))
                if string.find(tostring(errorMessage), "full") or string.find(tostring(errorMessage), "‡πÄ‡∏ï‡πá‡∏°") then
                    notify("Server Full", "üö´ ‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ï‡πá‡∏° ‡∏•‡∏≠‡∏á‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡∏ñ‡∏±‡∏î‡πÑ‡∏õ...", 2)
                end
            end
        end)
        
        -- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏Å‡πà‡∏≠‡∏ô teleport
        saveUsedServer(targetServer.id)
        
        -- ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏° Teleport
        local teleportAttempt = pcall(function()
            TeleportService:TeleportToPlaceInstance(PlaceID, targetServer.id, player)
        end)
        
        if teleportAttempt then
            -- ‡∏£‡∏≠‡∏î‡∏π‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
            local waitTime = 0
            while waitTime < 5 and not teleportSuccess do
                task.wait(0.5)
                waitTime = waitTime + 0.5
                -- ‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏≤‡∏ñ‡∏π‡∏Å teleport ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß (JobId ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô) ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á‡∏à‡∏∏‡∏î‡∏ô‡∏µ‡πâ
            end
            
            -- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏•‡∏≠‡∏á‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
            print("üîÑ ‡∏•‡∏≠‡∏á Attempt " .. attempt .. " ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏•‡∏≠‡∏á‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡∏ñ‡∏±‡∏î‡πÑ‡∏õ...")
        end
        
        failConnection:Disconnect()
        
        -- ‡∏´‡∏¢‡∏∏‡∏î‡∏•‡∏π‡∏õ‡∏ñ‡πâ‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
        if teleportSuccess then
            break
        end
        
        -- ‡∏£‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏≠‡∏á‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
        if attempt < maxAttempts then
            task.wait(1)
        end
    end
    
    -- ‡∏ñ‡πâ‡∏≤‡∏ó‡∏∏‡∏Å attempt ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß ‡πÉ‡∏ä‡πâ Random Teleport
    if not teleportSuccess then
        notify("Fallback", "üé≤ ‡πÉ‡∏ä‡πâ Random Teleport", 2)
        pcall(function()
            TeleportService:Teleport(PlaceID, player)
        end)
    end
end

-- üì° ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡∏Å‡πà‡∏≠‡∏ô teleport
local function checkServerStatus(serverId)
    local success, currentData = pcall(function()
        return HttpService:JSONDecode(
            game:HttpGet("https://games.roblox.com/v1/games/" .. PlaceID .. "/servers/Public?sortOrder=Asc&limit=100")
        )
    end)
    
    if success and currentData and currentData.data then
        for _, server in pairs(currentData.data) do
            if server.id == serverId then
                local availableSlots = (server.maxPlayers or 30) - (server.playing or 0)
                return availableSlots >= 1, availableSlots
            end
        end
    end
    
    return false, 0
end

-- üõ°Ô∏è ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á checkAndCollectDiamondsBeforeHop
local function checkAndCollectDiamondsBeforeHop()
    local diamondCount = 0
    local maxRetries = 3
    local player = game.Players.LocalPlayer
    local name = player.Name

    -- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ï‡∏≤‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    local isDead = false
    if player.Character and player.Character:FindFirstChild("Humanoid") then
        if player.Character.Humanoid.Health <= 0 then
            isDead = true
        end
    else
        isDead = true
    end

    -- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏ô workspace.Characters ‡∏î‡πâ‡∏ß‡∏¢
    for _, v in pairs(workspace.Characters:GetChildren()) do
        if string.find(v.Name, name) then
            isDead = true
            break
        end
    end

    if isDead then
        print("üíÄ ‡∏ï‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß - ‡∏¢‡πâ‡∏≤‡∏¢‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡∏ó‡∏±‡∏ô‡∏ó‡∏µ")
        saveUsedServer(game.JobId) -- Blacklist ‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
        return false
    else
        print("‚ù§Ô∏è ‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï")
    end

    -- ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö Diamond ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï
    for retry = 1, maxRetries do
        diamondCount = 0
        
        for _, diamond in pairs(workspace.Items:GetChildren()) do
            if diamond.Name == "Diamond" then
                diamondCount = diamondCount + 1
            end
        end
        
        if diamondCount > 0 then
            if _G.ShowLogs then
                print("üíé ‡∏û‡∏ö Diamond " .. diamondCount .. " ‡∏≠‡∏±‡∏ô ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Å‡πá‡∏ö... (‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà " .. retry .. "/" .. maxRetries .. ")")
            end
            StarterGui:SetCore("SendNotification", {
                Icon = "rbxassetid://16129235054",
                Title = "Diamond Found!",
                Text = "üíé ‡∏û‡∏ö Diamond " .. diamondCount .. " ‡∏≠‡∏±‡∏ô",
                Duration = 3
            })
            
            local collectedCount = collectDiamonds() or 0
            if _G.ShowLogs then
                print("‚úÖ ‡πÄ‡∏Å‡πá‡∏ö Diamond ‡πÑ‡∏î‡πâ " .. collectedCount .. " ‡∏≠‡∏±‡∏ô")
            end
            
            task.wait(1) -- ‡∏•‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠
        else
            if _G.ShowLogs then
                print("‚úÖ ‡πÑ‡∏°‡πà‡∏°‡∏µ Diamond ‡πÄ‡∏´‡∏•‡∏∑‡∏≠")
            end
            break
        end
    end
    
    -- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Diamond ‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢
    diamondCount = 0
    for _, diamond in pairs(workspace.Items:GetChildren()) do
        if diamond.Name == "Diamond" then
            diamondCount = diamondCount + 1
        end
    end
    
    if diamondCount > 0 then
        if _G.ShowLogs then
            warn("‚ö†Ô∏è ‡∏¢‡∏±‡∏á‡∏°‡∏µ Diamond " .. diamondCount .. " ‡∏≠‡∏±‡∏ô")
        end
        StarterGui:SetCore("SendNotification", {
            Icon = "rbxassetid://16129235054",
            Title = "Warning",
            Text = "‚ö†Ô∏è ‡∏¢‡∏±‡∏á‡∏°‡∏µ Diamond " .. diamondCount .. " ‡∏≠‡∏±‡∏ô",
            Duration = 3
        })
    else
        StarterGui:SetCore("SendNotification", {
            Icon = "rbxassetid://16129235054",
            Title = "Ready!",
            Text = "‚úÖ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏¢‡πâ‡∏≤‡∏¢‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü",
            Duration = 2
        })
    end
    
    return diamondCount == 0
end

-- üéØ ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á smartServerHop ‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö retry
local function smartServerHop(maxRetries)
    maxRetries = maxRetries or 3
    local startTime = tick()
    
    print("üõ°Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏° Smart Server Hop (‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î " .. maxRetries .. " ‡∏Ñ‡∏£‡∏±‡πâ‡∏á)")
    notify("Smart Hop", "üîç ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü", 3)
    
    -- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡πà‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢
    if not checkAndCollectDiamondsBeforeHop() then
        print("üîÑ ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏¢‡πâ‡∏≤‡∏¢‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü...")
    end
    
    -- ‡∏•‡∏≠‡∏á SafeHop ‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á
    for attempt = 1, maxRetries do
        print("üéØ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏ó‡∏µ‡πà " .. attempt .. "/" .. maxRetries)
        
        SafeHop() -- ‡πÉ‡∏ä‡πâ SafeHop ‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÅ‡∏•‡πâ‡∏ß
        
        -- ‡∏£‡∏≠‡∏î‡∏π‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
        local waitTime = 0
        local maxWait = 10 -- ‡∏£‡∏≠‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        
        while waitTime < maxWait do
            task.wait(1)
            waitTime = waitTime + 1
            
            -- ‡∏ñ‡πâ‡∏≤ teleport ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à JobId ‡∏à‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
            if game.JobId ~= game.JobId then
                print("‚úÖ Teleport ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!")
                return true
            end
        end
        
        -- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà attempt ‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢
        if attempt < maxRetries then
            print("‚ö†Ô∏è Attempt " .. attempt .. " ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß ‡∏£‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà...")
            notify("Retry", "üîÑ ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ... (" .. attempt .. "/" .. maxRetries .. ")", 3)
            task.wait(3)
        end
    end
    
    -- ‡∏ñ‡πâ‡∏≤‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß ‡πÉ‡∏ä‡πâ Random Teleport
    print("‚ùå ‡∏ó‡∏∏‡∏Å attempt ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß ‡πÉ‡∏ä‡πâ Random Teleport")
    notify("Final Attempt", "üé≤ Random Teleport", 3)
    
    pcall(function()
        TeleportService:Teleport(PlaceID, player)
    end)
    
    local totalTime = math.floor((tick() - startTime) * 100) / 100
    print("‚è±Ô∏è Smart Server Hop ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÉ‡∏ô " .. totalTime .. " ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ")
    
    return false
end

----
-- ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Health ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
local Players = game:GetService("Players")
local player = Players.LocalPlayer

if player.Character and player.Character:FindFirstChild("Humanoid") then
    if player.Character.Humanoid.Health == 0 then 
        smartServerHop()
    else
        print("‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï - HP: " .. player.Character.Humanoid.Health)
    end
else
    smartServerHop()
end

-- ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡πÉ‡∏ä‡πâ Event ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏≤‡∏¢ (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)
local function onCharacterDied()
    smartServerHop()
end

local function onCharacterAdded(character)
    local humanoid = character:WaitForChild("Humanoid")
    
    -- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏°‡∏∑‡πà‡∏≠ HP ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
    humanoid.HealthChanged:Connect(function(health)
        if health <= 0 then
            onCharacterDied()
        end
    end)
    
    -- ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ Event Died ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
    humanoid.Died:Connect(function()
        onCharacterDied()
    end)
end

-- ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Events
player.CharacterAdded:Connect(onCharacterAdded)

-- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
if player.Character then
    onCharacterAdded(player.Character)
end

-- ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 3: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏ö‡∏ö Loop (‡πÑ‡∏°‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ ‡πÅ‡∏ï‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ)

---

if game.PlaceId == 79546208627805 then 
    StarterGui:SetCore("SendNotification", {
        Icon = "rbxassetid://16129235054",
        Title = "Place",
        Text = "Lobby",
        Duration = 3
    })

    spawn(function()
        while task.wait() do 
            if _G.FarmChest then 
                repeat task.wait()
                    if workspace.Teleporter1.BillboardHolder.BillboardGui.Players.Text == "0/5" then 
                        player.Character.HumanoidRootPart.CFrame = workspace.Teleporter1.EnterPart.CFrame
                        local args = {
                            "Chosen",
                            [3] = 1
                        }
                        ReplicatedStorage:WaitForChild("RemoteEvents"):WaitForChild("TeleportEvent"):FireServer(unpack(args))
                    elseif workspace.Teleporter2.BillboardHolder.BillboardGui.Players.Text == "0/5" then 
                        player.Character.HumanoidRootPart.CFrame = workspace.Teleporter2.EnterPart.CFrame
                        local args = {
                            "Chosen",
                            [3] = 1
                        }
                        ReplicatedStorage:WaitForChild("RemoteEvents"):WaitForChild("TeleportEvent"):FireServer(unpack(args))
                    elseif workspace.Teleporter3.BillboardHolder.BillboardGui.Players.Text == "0/5" then 
                        player.Character.HumanoidRootPart.CFrame = workspace.Teleporter3.EnterPart.CFrame
                        local args = {
                            "Chosen",
                            [3] = 1
                        }
                        ReplicatedStorage:WaitForChild("RemoteEvents"):WaitForChild("TeleportEvent"):FireServer(unpack(args))
                    end
                
                    if player.PlayerGui.Interface.LobbyCreate.Visible == true then
                        StarterGui:SetCore("SendNotification", {
                            Icon = "rbxassetid://16129235054",
                            Title = "Strat Lobby!",
                            Text = "Create Party...",
                            Duration = 3
                        })
                        
                        local partySizeButton = player.PlayerGui.Interface.LobbyCreate.ButtonList.Button1
                        if partySizeButton and partySizeButton:IsA("TextButton") then
                            GuiService.SelectedObject = partySizeButton
                            VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.Return, false, game)
                            VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.Return, false, game)
                            task.wait(0.5)

                            if partySizeButton.BackgroundColor3 == Color3.fromRGB(255, 225, 0) then
                                local createButton = player.PlayerGui.Interface.LobbyCreate.HeaderFrame.CreateButton
                                if createButton and createButton:IsA("TextButton") then
                                    GuiService.SelectedObject = createButton
                                    VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.Return, false, game)
                                    VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.Return, false, game)
                                end
                            end
                        end

                        task.wait(1)
                    end
                until player.PlayerGui.TeleporterAssets.TextButton.Visible == true or  not _G.FarmChest
                print("‡πÇ‡∏¢‡πà‡∏ß‡∏ß‡∏ß")
            end
        end
    end)
    
elseif game.PlaceId == 126509999114328 then
    StarterGui:SetCore("SendNotification", {
        Icon = "rbxassetid://16129235054",
        Title = "Place",
        Text = "Ingame",
        Duration = 3
    })
    
    -- ‡∏ü‡∏≤‡∏£‡πå‡∏°‡πÄ‡∏û‡∏ä‡∏£
    _G.FarmChest = _G.FarmChest or true
    _G.FastMode = _G.FastMode or true
    _G.ShowLogs = _G.ShowLogs or true
    _G.UseTeleport = _G.UseTeleport or true
    _G.MaxCycles = _G.MaxCycles or 4

        spawn(function()
        while true do 
            wait(60)
            if _G.FarmChest then
                SafeHop()
            end
        end
    end)

    -- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Teleport ‡πÑ‡∏õ‡∏´‡∏≤‡∏Å‡∏•‡πà‡∏≠‡∏á
    local function teleportToChest(chest)
        if player.Character and player.Character:FindFirstChild("HumanoidRootPart") and chest:FindFirstChild("Main") then
            local success, err = pcall(function()
                player.Character.HumanoidRootPart.CFrame = chest.Main.CFrame + Vector3.new(0, 5, 0)
            end)
            
            if success and _G.ShowLogs then
                -- print("üöÄ TP ‡πÑ‡∏õ‡∏´‡∏≤: " .. chest.Name)
            elseif not success and _G.ShowLogs then
                warn("‚ùå TP ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß: " .. tostring(err))
            end
            
            return success
        end
        return false
    end

    local function collectDiamonds()
        local diamondCount = 0
        for _, diamond in pairs(workspace.Items:GetChildren()) do
            if diamond.Name == "Diamond" then
                local success, err = pcall(function()
                    local args = {
                        [1] = diamond
                    }
                    game:GetService("ReplicatedStorage"):WaitForChild("RemoteEvents"):WaitForChild("RequestTakeDiamonds"):FireServer(unpack(args))
                    diamondCount = diamondCount + 1
                end)
                
                if success and _G.ShowLogs then
                    print("‚úÖ Collect Diamond Success! (" .. diamondCount .. ")\n‚úÖ ‡πÄ‡∏Å‡πá‡∏ö Diamond ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! (" .. diamondCount .. ")")
                    StarterGui:SetCore("SendNotification", {
                        Icon = "rbxassetid://16129235054",
                        Title = "‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô!",
                        Text = "‚úÖ Collect Diamond Success! (" .. diamondCount .. ")\n‚úÖ ‡πÄ‡∏Å‡πá‡∏ö Diamond ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! (" .. diamondCount .. ")",
                        Duration = 5
                    })
                elseif not success and _G.ShowLogs then
                    warn("‚ùå Collect Diamond Failed: " .. tostring(err))
                end
                
                task.wait(0.05)
            end
        end
        
        if diamondCount > 0 and _G.ShowLogs then
            print("üíé ‡∏£‡∏ß‡∏°‡πÄ‡∏Å‡πá‡∏ö Diamond ‡πÑ‡∏î‡πâ: " .. diamondCount .. " ‡∏≠‡∏±‡∏ô")
        end
        
        return diamondCount
    end

    -- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    local function openAllChestsAndCollect()
        if not _G.FarmChest then return end
        
        local chestCount = 0
        local successCount = 0
        local alreadyOpenedCount = 0
        
        for i, v in pairs(workspace.Items:GetChildren()) do 
            if not _G.FarmChest then break end
            
            if string.find(v.Name, "Chest") and not string.find(v.Name, "Snow") and not string.find(v.Name, "Alien") then 
                chestCount = chestCount + 1
                
                if v:FindFirstChild("Main") and not v:FindFirstChild("IceBlock") then
                    if v.Main:FindFirstChild("ProximityAttachment") then
                        local proximityInteraction = v.Main.ProximityAttachment:FindFirstChild("ProximityInteraction")
                        if proximityInteraction then
                            local success, err = pcall(function()
                                if _G.UseTeleport then
                                    teleportToChest(v)
                                    task.wait(0.2)
                                end
                                
                                fireproximityprompt(proximityInteraction)
                                successCount = successCount + 1
                                
                                if _G.ShowLogs then
                                    --print("üéÅ ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πà‡∏≠‡∏á: " .. v.Name)
                                end
                                
                                if not _G.FastMode then
                                    task.wait(0.5)
                                    collectDiamonds()
                                end
                            end)
                            
                            if not success and _G.ShowLogs then
                                warn("‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πà‡∏≠‡∏á " .. v.Name .. ": " .. tostring(err))
                            end
                        end
                    else
                        alreadyOpenedCount = alreadyOpenedCount + 1
                        if _G.ShowLogs then
                            --print("üì¶ ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß: " .. v.Name)
                        end
                    end
                end
                
                task.wait(0.1)
            end
        end
        
        if _G.ShowLogs then
            print("üìä ‡∏û‡∏ö‡∏Å‡∏•‡πà‡∏≠‡∏á: " .. chestCount .. " | ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏î‡πâ: " .. successCount .. " | ‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß: " .. alreadyOpenedCount)
            StarterGui:SetCore("SendNotification", {
                Icon = "rbxassetid://16129235054",
                Title = "Notify!",
                Text = " FoundChest: " .. chestCount .. " | OpenChest: " .. successCount .. " | AlreadyOpen: " .. alreadyOpenedCount,
                Duration = 3
            })
        end
        
        if chestCount == 0 then
            print("üîÑ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏•‡πà‡∏≠‡∏á ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Diamond ‡∏Å‡πà‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡πÄ‡∏ã‡∏¥‡∏ü")
            StarterGui:SetCore("SendNotification", {
                Icon = "rbxassetid://16129235054",
                Title = "Notify!",
                Text = "No Chest, Checking Diamond Before Change Server!\n‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Diamond ‡∏Å‡πà‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü!",
                Duration = 3
            })
            smartServerHop() -- ‡πÉ‡∏ä‡πâ smartServerHop ‡πÅ‡∏ó‡∏ô antiFullServerHop
            _G.FarmChest = false
            return 0
        end
        
        -- ‡∏ñ‡πâ‡∏≤‡∏ó‡∏∏‡∏Å‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß
        if successCount == 0 and alreadyOpenedCount == chestCount then
            print("üîÑ ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Diamond ‡∏Å‡πà‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡πÄ‡∏ã‡∏¥‡∏ü")
            StarterGui:SetCore("SendNotification", {
                Icon = "rbxassetid://16129235054",
                Title = "‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô!",
                Text = "All Chest Opened, Checking Diamond Before Change Server!\n‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Diamond ‡∏Å‡πà‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü!",
                Duration = 3
            })
            smartServerHop() -- ‡πÉ‡∏ä‡πâ smartServerHop ‡πÅ‡∏ó‡∏ô antiFullServerHop
            _G.FarmChest = false
            return 0
        end
        
        -- ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏£‡πá‡∏ß ‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡πá‡∏ö Diamond ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à
        if _G.FastMode and successCount > 0 then
            if _G.ShowLogs then
                print("‚è≥ ‡∏£‡∏≠ Diamond spawn...")
            end
            task.wait(1) -- ‡∏£‡∏≠‡πÉ‡∏´‡πâ Diamond ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î spawn
            collectDiamonds()
        end
        
        return successCount
    end

    spawn(function()
    while true do
        wait(1) -- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        
        if player.Character and player.Character:FindFirstChild("Humanoid") then
            local health = player.Character.Humanoid.Health
            
            if health == 0 then
               smartServerHop()
                -- ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡πÄ‡∏ã‡∏¥‡∏ü‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
            else
                openAllChestsAndCollect()
            end
        else
            smartServerHop()
        end
    end
end)

    -- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ü‡∏≤‡∏£‡πå‡∏°‡πÅ‡∏ö‡∏ö‡∏ß‡∏ô‡∏•‡∏π‡∏õ
    local function farmLoop()
        local cycleCount = 0
        
        while _G.FarmChest do
            cycleCount = cycleCount + 1
            local startTime = tick()
            
            if _G.ShowLogs then
                print(" ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà " .. cycleCount .. "/" .. _G.MaxCycles)
            end
            StarterGui:SetCore("SendNotification", {
                Icon = "rbxassetid://16129235054",
                Title = "Strat!",
                Text = "Round " .. cycleCount .. "/" .. _G.MaxCycles,
                Duration = 10
            })
            
            local chestsOpened = openAllChestsAndCollect()
            
            -- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß (return 0) ‡πÉ‡∏´‡πâ‡∏´‡∏¢‡∏∏‡∏î‡∏•‡∏π‡∏õ
            if chestsOpened == 0 then
                break
            end
            
            local endTime = tick()
            local cycleTime = math.floor((endTime - startTime) * 100) / 100
            
            if _G.ShowLogs then
                print("‚è±Ô∏è ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà " .. cycleCount .. " ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÉ‡∏ô " .. cycleTime .. " ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ")
            end
            
            -- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ñ‡∏£‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≠‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
            if cycleCount >= _G.MaxCycles then
                if _G.ShowLogs then
                    print("üîÑ ‡∏Ñ‡∏£‡∏ö " .. _G.MaxCycles .. " ‡∏£‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Diamond ‡∏Å‡πà‡∏≠‡∏ô‡∏¢‡πâ‡∏≤‡∏¢‡πÄ‡∏ã‡∏¥‡∏ü")
                end
                StarterGui:SetCore("SendNotification", {
                    Icon = "rbxassetid://16129235054",
                    Title = "Notify!",
                    Text = "Max " .. _G.MaxCycles .. " Round, Checking Diamond Before ChangeServer!",
                    Duration = 3
                })
                smartServerHop() -- ‡πÉ‡∏ä‡πâ smartServerHop ‡πÅ‡∏ó‡∏ô antiFullServerHop
                _G.FarmChest = false
                break
            end
            
            -- ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏¥‡∏î ‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏£‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà
            if _G.FarmChest then
                if _G.ShowLogs then
                    print("üí§ ‡∏£‡∏≠ 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡∏Å‡πà‡∏≠‡∏ô‡∏£‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà...")
                end
                task.wait(1) -- ‡∏£‡∏≠‡πÅ‡∏Ñ‡πà 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
            end
        end
        
        if _G.ShowLogs then
            print("üõë ‡∏´‡∏¢‡∏∏‡∏î‡∏ü‡∏≤‡∏£‡πå‡∏°‡πÅ‡∏•‡πâ‡∏ß (‡∏£‡∏ß‡∏° " .. cycleCount .. " ‡∏£‡∏≠‡∏ö)")
            StarterGui:SetCore("SendNotification", {
                Icon = "rbxassetid://16129235054",
                Title = "Notify!",
                Text = "üõë StopFarm (All " .. cycleCount .. " Round)",
                Duration = 5
            })
        end
    end

    -- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏£‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (‡∏à‡∏≤‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö)
    local function runOnce()
        if _G.ShowLogs then
            print("üéØ ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏Å‡πá‡∏ö Diamond ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß")
        end
        openAllChestsAndCollect()
    end

    spawn(function()
        while true do
            if not _G.FarmChest then
                smartServerHop() -- ‡πÉ‡∏ä‡πâ smartServerHop ‡πÅ‡∏ó‡∏ô antiFullServerHop
            end
            task.wait(.1)
        end
    end)

    spawn(function()
        while true do
            if _G.FarmChest then
                farmLoop()
            end
            task.wait(.1)
        end
    end)

    getgenv().runOnce = runOnce
    VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.H, false, game)
    VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.H, false, game)
end

-- üéØ Export ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å
getgenv().SmartHop = SmartHop
getgenv().QuickHop = QuickHop
getgenv().SafeHop = SafeHop
getgenv().smartServerHop = smartServerHop
